---
title: 向量嵌入
description: 文本向量嵌入 API，用于语义搜索和相似度计算
navigation:
  icon: i-lucide-binary
---

# 向量嵌入 API

向量嵌入（Embeddings）API 可以将文本转换为高维向量表示，用于语义搜索、文本相似度计算、聚类分析等场景。

## 应用场景

::card-group
  ::card{icon="i-lucide-search" title="语义搜索"}
  理解用户搜索意图，返回语义相关的结果。
  ::

  ::card{icon="i-lucide-git-compare" title="相似度计算"}
  计算文本之间的语义相似度。
  ::

  ::card{icon="i-lucide-layers" title="聚类分析"}
  将相似的文本自动分组。
  ::

  ::card{icon="i-lucide-brain" title="RAG 应用"}
  构建检索增强生成（RAG）应用。
  ::
::

## 创建向量嵌入

### 请求示例

```bash
curl -X POST https://api.atdak.com/v1/embeddings \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "text-embedding-v3",
    "input": ["艾塔达克提供强大的 AI 服务", "人工智能改变世界"]
  }'
```

### 请求参数

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| model | string | 是 | 模型名称 |
| input | string/array | 是 | 输入文本，可以是字符串或字符串数组 |
| encoding_format | string | 否 | 输出格式，`float` 或 `base64` |
| dimensions | integer | 否 | 向量维度，部分模型支持 |

### 响应示例

```json
{
  "object": "list",
  "model": "text-embedding-v3",
  "data": [
    {
      "index": 0,
      "object": "embedding",
      "embedding": [0.0023064255, -0.009327292, ...]
    },
    {
      "index": 1,
      "object": "embedding", 
      "embedding": [-0.0028842222, 0.0073928394, ...]
    }
  ],
  "usage": {
    "prompt_tokens": 18,
    "total_tokens": 18
  }
}
```

## 可用模型

| 模型 | 维度 | 最大 Token | 说明 |
|------|------|-----------|------|
| text-embedding-v3 | 1536 | 8192 | 最新一代通用嵌入模型 |
| text-embedding-v2 | 1536 | 8192 | 稳定版本，兼容性好 |
| text-embedding-v3-small | 512 | 8192 | 轻量版，速度更快 |
| text-embedding-v3-large | 3072 | 8192 | 高精度版本 |

## 使用示例

### Python 示例

```python
from atdak import Atdak

client = Atdak(api_key="YOUR_API_KEY")

# 创建嵌入向量
response = client.embeddings.create(
    model="text-embedding-v3",
    input=["你好，世界", "Hello, World"]
)

# 获取向量
embedding1 = response.data[0].embedding
embedding2 = response.data[1].embedding

# 计算余弦相似度
import numpy as np
similarity = np.dot(embedding1, embedding2) / (
    np.linalg.norm(embedding1) * np.linalg.norm(embedding2)
)
print(f"相似度: {similarity:.4f}")
```

### Node.js 示例

```javascript
import { Atdak } from 'atdak';

const client = new Atdak({ apiKey: 'YOUR_API_KEY' });

const response = await client.embeddings.create({
  model: 'text-embedding-v3',
  input: ['你好，世界', 'Hello, World']
});

console.log(response.data[0].embedding);
```

## 最佳实践

1. **批量处理**：尽量将多个文本放在一次请求中，减少 API 调用次数
2. **文本预处理**：清理无关字符，保留核心语义内容
3. **选择合适的模型**：根据精度和速度需求选择模型
4. **缓存向量**：对于不变的文本，缓存计算好的向量

## 定价

| 模型 | 价格 |
|------|------|
| text-embedding-v3 | ¥0.0001/千 Token |
| text-embedding-v3-small | ¥0.00005/千 Token |
| text-embedding-v3-large | ¥0.0002/千 Token |

## 相关链接

- [对话补全 API](/docs/api-reference/chat)
- [Python SDK](/docs/sdk/python)
- [Node.js SDK](/docs/sdk/nodejs)
